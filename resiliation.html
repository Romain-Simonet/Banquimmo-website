<!doctype html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Banquimmo • Résiliation / Rétractation</title>
  <meta name="description" content="Formulaire de résiliation / rétractation de contrat d'assurance Banquimmo : saisie, vérification, envoi. Étude gratuite, réponse rapide." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    html,body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,'Helvetica Neue',Arial}
    .step-active{--tw-border-opacity:1;border-color:rgb(37 99 235/var(--tw-border-opacity));background:#eff6ff}
  </style>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="min-h-screen bg-white text-gray-900">
  <!-- Header -->
  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100">
    <div class="max-w-7xl mx-auto px-4 md:px-6">
      <div class="flex items-center justify-between py-4">
        <a href="index.html#accueil" class="flex items-center gap-2">
          <img src="images/banquimmo_logo.jpg" alt="Banquimmo" class="h-10 w-auto object-contain" />
          <div class="font-semibold text-lg md:text-xl tracking-tight">Banquimmo</div>
        </a>
        <nav class="hidden md:flex items-center gap-6">
          <a href="index.html#expertises" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Expertises</a>
          <a href="index.html#methode" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Méthode</a>
          <a href="index.html#avis" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Avis</a>
          <a href="index.html#faq" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Faq</a>
          <a href="https://banquimmo.parcours.digitalcourtier.com/" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Assurances</a>
          <a href="actualites.html" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Actualités</a>
          <a href="https://www.banquimmo.immo/" class="text-sm md:text-base text-gray-700 hover:text-gray-900">Programmes Neufs</a>
          <a href="espace-client.html" class="inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-white shadow-sm hover:bg-blue-700">
            <i data-lucide="user" class="h-4 w-4"></i> Espace Client
          </a>
        </nav>
        <button id="menuBtn" class="md:hidden inline-flex items-center justify-center rounded-xl border border-gray-200 p-2" aria-label="Ouvrir le menu">
          <i data-lucide="menu" class="h-5 w-5"></i>
        </button>
      </div>
      <div id="mobileMenu" class="md:hidden pb-4 hidden">
        <div class="grid gap-3">
          <a href="index.html#expertises" class="rounded-xl px-3 py-2 hover:bg-gray-50">Expertises</a>
          <a href="index.html#methode" class="rounded-xl px-3 py-2 hover:bg-gray-50">Méthode</a>
          <a href="index.html#avis" class="rounded-xl px-3 py-2 hover:bg-gray-50">Avis</a>
          <a href="index.html#faq" class="rounded-xl px-3 py-2 hover:bg-gray-50">Faq</a>
          <a href="https://banquimmo.parcours.digitalcourtier.com" class="rounded-xl px-3 py-2 hover:bg-gray-50">Assurances</a>
          <a href="actualites.html" class="rounded-xl px-3 py-2 hover:bg-gray-50">Actualités</a>
          <a href="https://www.banquimmo.immo/" class="rounded-xl px-3 py-2 hover:bg-gray-50">Programmes Neufs</a>
          <a href="espace-client.html" class="rounded-xl px-3 py-2 hover:bg-gray-50">Espace Client</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 bg-gradient-to-b from-blue-50 via-white to-white"></div>
    <div class="max-w-7xl mx-auto px-4 md:px-6 py-16 md:py-24">
      <div class="grid md:grid-cols-2 items-end gap-8">
        <div>
          <h1 class="text-4xl md:text-5xl font-semibold leading-tight">Résiliation / <span class="text-blue-600">Rétractation</span> de contrat</h1>
          <p class="mt-3 text-gray-600">Remplissez votre demande en 2 étapes. Nous revenons vers vous rapidement avec la marche à suivre.</p>
        </div>
        <div class="rounded-2xl border border-gray-100 bg-white p-4 md:p-6">
          <div class="text-sm text-gray-600">Dernière mise à jour : <span id="maj"></span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Wizard -->
  <main class="max-w-5xl mx-auto px-4 md:px-6 pb-20">
    <!-- Stepper -->
    <div class="grid grid-cols-2 gap-3 mb-6">
      <div id="badgeStep1" class="rounded-2xl border border-gray-200 bg-white p-3 step-active">
        <div class="text-xs text-gray-500">Étape 1</div>
        <div class="font-medium">Saisie des informations</div>
      </div>
      <div id="badgeStep2" class="rounded-2xl border border-gray-200 bg-white p-3">
        <div class="text-xs text-gray-500">Étape 2</div>
        <div class="font-medium">Vérification & envoi</div>
      </div>
    </div>

    <!-- Étape 1 -->
    <form id="step1" class="rounded-3xl border border-gray-100 bg-white p-6 md:p-8 shadow-sm">
      <h2 class="text-xl font-semibold">Vos informations</h2>
      <div class="mt-6 grid gap-5">
        <div class="grid md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm text-gray-700">Nom*</label>
            <input name="lastName" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Nom">
          </div>
          <div>
            <label class="text-sm text-gray-700">Prénom*</label>
            <input name="firstName" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Prénom">
          </div>
          <div>
            <label class="text-sm text-gray-700">Raison / dénomination sociale</label>
            <input name="raisonSociale" class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Raison sociale">
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm text-gray-700">Date de naissance*</label>
            <input type="date" name="dateNaissance" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2">
          </div>
          <div>
            <label class="text-sm text-gray-700">Adresse postale*</label>
            <input name="adress" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Adresse postale">
          </div>
          <div>
            <label class="text-sm text-gray-700">Risque couvert*</label>
            <select name="Risquecouvert" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2">
              <option value="">— Sélectionnez —</option>
              <option>Santé</option>
              <option>Prévoyance</option>
              <option>IARD</option>
            </select>
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm text-gray-700">Numéro d'adhérent</label>
            <input type="text" inputmode="numeric" name="numAd" class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Numéro d'adhérent">
          </div>
          <div>
            <label class="text-sm text-gray-700">Numéro de contrat</label>
            <input type="text" inputmode="numeric" name="numContrat" class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Numéro de contrat">
          </div>
          <div>
            <label class="text-sm text-gray-700">Adresse mail*</label>
            <input type="email" name="mail" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="E-mail">
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-4">
          <div>
            <label class="text-sm text-gray-700">Téléphone*</label>
            <input type="tel" name="phone" required minlength="10" maxlength="20" class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="+33...">
          </div>
          <div>
            <label class="text-sm text-gray-700">Motif de résiliation*</label>
            <select id="motif" name="motif" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2">
              <option value="">— Sélectionnez —</option>
              <option>Résiliation à échéance</option>
              <option>Résiliation infra annuelle (RIA)</option>
              <option>Changement de situation</option>
              <option>Augmentation tarifaire</option>
              <option>Décès de l'assuré</option>
              <option>Autres</option>
            </select>
          </div>
          <div>
            <label class="text-sm text-gray-700">Date de résiliation souhaitée*</label>
            <input type="date" name="dateResiliation" required class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2">
          </div>
        </div>

        <div id="otherMotifWrap" class="hidden">
          <label class="text-sm text-gray-700">Autres — précisez*</label>
          <input name="otherMotif" class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="Votre motif">
        </div>

        <div>
          <label class="text-sm text-gray-700">Commentaire</label>
          <textarea name="comment" rows="4" class="mt-1 w-full rounded-xl border border-gray-200 px-3 py-2"></textarea>
        </div>

        <label class="flex items-start gap-2 text-sm text-gray-600">
          <input id="consent" type="checkbox" required class="mt-1">
          <span>J’accepte d’être contacté(e) (email / téléphone) pour le traitement de ma demande. Voir
            <a href="confidentialite.html" class="underline">Données personnelles</a>.
          </span>
        </label>

        <div class="pt-2">
          <button type="button" id="toStep2"
            class="inline-flex items-center gap-2 rounded-xl bg-blue-600 px-5 py-3 text-white hover:bg-blue-700">
            Suivant <i data-lucide="arrow-right" class="h-4 w-4"></i>
          </button>
        </div>
      </div>
    </form>

    <!-- Étape 2 -->
    <form id="step2" class="rounded-3xl border border-gray-100 bg-white p-6 md:p-8 shadow-sm mt-6 hidden" novalidate>
      <h2 class="text-xl font-semibold">Vérifiez vos informations</h2>
      <p class="text-sm text-gray-600 mt-1">Merci de confirmer ci-dessous. Vous pouvez revenir en arrière pour corriger si besoin.</p>

      <div class="mt-6 grid md:grid-cols-3 gap-4 text-sm">
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Nom</div><div id="r_lastName" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Prénom</div><div id="r_firstName" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Raison sociale</div><div id="r_raisonSociale" class="font-medium"></div>
        </div>

        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Date de naissance</div><div id="r_dateNaissance" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Adresse postale</div><div id="r_adress" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Risque couvert</div><div id="r_Risquecouvert" class="font-medium"></div>
        </div>

        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">N° d’adhérent</div><div id="r_numAd" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">N° de contrat</div><div id="r_numContrat" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">E-mail</div><div id="r_mail" class="font-medium"></div>
        </div>

        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Téléphone</div><div id="r_phone" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Motif</div><div id="r_motif" class="font-medium"></div>
        </div>
        <div class="rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Date souhaitée</div><div id="r_dateResiliation" class="font-medium"></div>
        </div>

        <div class="md:col-span-3 rounded-2xl border border-gray-100 p-4">
          <div class="text-gray-500">Commentaire</div><div id="r_comment" class="font-medium whitespace-pre-wrap"></div>
        </div>
      </div>

      <div class="mt-6 flex items-center justify-between gap-3">
        <button type="button" id="backToStep1"
          class="inline-flex items-center gap-2 rounded-xl border border-gray-200 px-5 py-3 hover:bg-gray-50">
          <i data-lucide="arrow-left" class="h-4 w-4"></i> Modifier
        </button>
        <button type="submit" id="confirmBtn"
          class="inline-flex items-center gap-2 rounded-xl bg-blue-600 px-5 py-3 text-white hover:bg-blue-700">
          Confirmer ma demande
          <i data-lucide="send" class="h-4 w-4"></i>
        </button>
      </div>

      <!-- Alerte succès -->
      <div id="successBox" class="hidden mt-6 rounded-2xl border border-green-200 bg-green-50 p-4 text-green-900">
        <div class="font-medium">Votre demande a été envoyée.</div>
        <div class="text-sm">Un conseiller Banquimmo vous contactera rapidement.</div>
      </div>
    </form>
  </main>

  <!-- Footer -->
  <footer class="border-t border-gray-100">
    <div class="max-w-7xl mx-auto px-4 md:px-6 py-10">
      <div class="grid md:grid-cols-4 gap-8">
        <div>
          <div class="flex items-center gap-2">
            <div class="h-9 w-9 rounded-2xl bg-blue-600 grid place-items-center">
              <i data-lucide="home" class="h-5 w-5 text-white"></i>
            </div>
            <div class="font-semibold text-lg">Banquimmo</div>
          </div>
          <p class="mt-3 text-sm text-gray-600">Courtier indépendant : prêts, assurance emprunteur et financements professionnels.</p>
        </div>
        <div>
          <div class="font-semibold">Navigation</div>
          <ul class="mt-3 space-y-2 text-sm text-gray-600">
            <li><a href="index.html#expertises" class="hover:text-gray-900">Nos expertises</a></li>
            <li><a href="index.html#methode" class="hover:text-gray-900">Notre méthode</a></li>
            <li><a href="actualites.html" class="hover:text-gray-900">Actualités</a></li>
            <li><a href="https://www.banquimmo.immo/" class="hover:bg-gray-900">Programmes Neufs</a></li>
            <li><a href="https://banquimmo.parcours.digitalcourtier.com/" class="hover:text-gray-900">Assurances</a></li>
            <li><a href="mentions.html" class="hover:text-gray-900">Mentions légales</a></li>
            <li><a href="confidentialite.html" class="hover:text-gray-900">Politique de confidentialité</a></li>
          </ul>
        </div>
        <div>
          <div class="font-semibold">Nous contacter</div>
          <ul class="mt-3 space-y-2 text-sm text-gray-600">
            <li class="flex items-center gap-2"><i data-lucide="phone" class="h-4 w-4"></i> +33(0) 4 78 58 04 87</li>
            <li class="flex items-center gap-2"><i data-lucide="mail" class="h-4 w-4"></i> contact@banquimmo.fr</li>
            <li class="flex items-center gap-2"><i data-lucide="map-pin" class="h-4 w-4"></i> 253 Av. Jean Jaurès, 69150 Décines-Charpieu</li>
          </ul>
        </div>
        <div>
          <div class="font-semibold">Rendez-vous</div>
          <p class="mt-3 text-sm text-gray-600">Dispo en agence, téléphone ou visio. Étude gratuite et sans engagement.</p>
          <a href="index.html#contact" class="mt-4 inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-white hover:bg-blue-700">
            Prendre RDV <i data-lucide="calendar" class="h-4 w-4"></i>
          </a>
        </div>
      </div>
      <div class="mt-10 text-xs text-gray-500">© <span id="year"></span> Banquimmo. Tous droits réservés.</div>
    </div>
  </footer>

  <!-- JS -->
  <script>
    // Icons
    document.addEventListener('DOMContentLoaded', ()=>{ if (window.lucide) window.lucide.createIcons(); });

    // Mobile menu
    const btn = document.getElementById('menuBtn');
    const menu = document.getElementById('mobileMenu');
    if (btn && menu){
      btn.addEventListener('click', ()=>{
        menu.classList.toggle('hidden');
        const i = btn.querySelector('i');
        if (i) i.setAttribute('data-lucide', menu.classList.contains('hidden') ? 'menu' : 'x');
        if (window.lucide) window.lucide.createIcons();
      });
      menu.querySelectorAll('a').forEach(a=>a.addEventListener('click', ()=>menu.classList.add('hidden')));
    }

    // Dates dynamiques (maj + bornes)
    const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();
    const maj = document.getElementById('maj'); if (maj) maj.textContent = new Date().toLocaleDateString('fr-FR');

    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const toStep2 = document.getElementById('toStep2');
    const backToStep1 = document.getElementById('backToStep1');
    const badge1 = document.getElementById('badgeStep1');
    const badge2 = document.getElementById('badgeStep2');

    // Champ "Autres" motif
    const motif = document.getElementById('motif');
    const otherWrap = document.getElementById('otherMotifWrap');
    const otherInput = step1.querySelector('[name="otherMotif"]');

    motif.addEventListener('change', ()=>{
      const isOther = motif.value === 'Autres';
      otherWrap.classList.toggle('hidden', !isOther);
      otherInput.required = isOther;
      if (!isOther) otherInput.value = '';
    });

    // Bornes dates
    const dateNaissance = step1.querySelector('[name="dateNaissance"]');
    const dateRes = step1.querySelector('[name="dateResiliation"]');
    const today = new Date();
    const toISO = d => d.toISOString().slice(0,10);
    const d18 = new Date(today); d18.setFullYear(today.getFullYear()-18);
    const d100 = new Date(today); d100.setFullYear(today.getFullYear()-100);
    if (dateNaissance){ dateNaissance.max = toISO(d18); dateNaissance.min = toISO(d100); }
    if (dateRes){ dateRes.min = toISO(today); }

    // Étape 1 -> Étape 2
    toStep2.addEventListener('click', ()=>{
      if (!step1.reportValidity()) return;

      // Remplir le récap
      const data = Object.fromEntries(new FormData(step1).entries());
      const fill = (id, val)=>{ const el=document.getElementById(id); if(el) el.textContent = val || '—'; };
      fill('r_lastName', data.lastName);
      fill('r_firstName', data.firstName);
      fill('r_raisonSociale', data.raisonSociale);
      fill('r_dateNaissance', data.dateNaissance);
      fill('r_adress', data.adress);
      fill('r_Risquecouvert', data.Risquecouvert);
      fill('r_numAd', data.numAd);
      fill('r_numContrat', data.numContrat);
      fill('r_mail', data.mail);
      fill('r_phone', data.phone);
      fill('r_motif', data.motif + (data.otherMotif ? ' — ' + data.otherMotif : ''));
      fill('r_dateResiliation', data.dateResiliation);
      fill('r_comment', data.comment);

      step1.classList.add('hidden');
      step2.classList.remove('hidden');
      badge1.classList.remove('step-active');
      badge2.classList.add('step-active');
      if (window.lucide) window.lucide.createIcons();
    });

    // Retour
    if (backToStep1){
      backToStep1.addEventListener('click', ()=>{
        step2.classList.add('hidden');
        step1.classList.remove('hidden');
        badge2.classList.remove('step-active');
        badge1.classList.add('step-active');
        window.scrollTo({top: step1.offsetTop-80, behavior:'smooth'});
      });
    }

    // Envoi (à adapter à ton backend / CF7 REST)
    const successBox = document.getElementById('successBox');
    step2.addEventListener('submit', async (e)=>{
      e.preventDefault();

      // Exemple : construire l'objet
      const payload = Object.fromEntries(new FormData(step1).entries());

      /* ➤ Branche ici ton envoi :
         - CF7 REST (WordPress) : POST /wp-json/contact-form-7/v1/contact-forms/{ID}/feedback
         - Webhook (Zapier, Make) ou Formspree
         - Email via ton backend
      */
      try {
        // await fetch('TON_ENDPOINT', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)});
        successBox.classList.remove('hidden');
        window.scrollTo({ top: successBox.offsetTop-120, behavior:'smooth' });
      } catch(err){
        alert("Échec de l'envoi. Merci de réessayer.");
      }
    });
  </script>

  <script
    id="partoo-messaging-widget"
    type="module"
    src="https://cdn.partoo.co/widget/prod/latest.js"
    data-token="ab13a3c5-c68b-464e-8be4-80c1c432eafa"
    data-icon="message_logo_icon"
    data-color="#2563EB"
    data-policy-url="https://app.partoo.co/privacy/messaging/c934bd37-f4db-44d8-84f5-6c86c5ef00dc?lang=fr"
    data-country="FR"
    data-avatar-image-url="https://cdn.partoo.co/avatar/prod/ab13a3c5-c68b-464e-8be4-80c1c432eafa/55ab8db4-743e-4ee0-b323-64e3cbb640c1.png"
></script>

</body>
</html>
